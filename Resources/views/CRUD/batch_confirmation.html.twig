{#

This file is part of the Rz package.

(c) mell m. zamora <me@rmzamora.com>

For the full copyright and license information, please view the LICENSE
file that was distributed with this source code.

#}

{% extends base_template %}

{% block actions %}
    <div class="row-fluid admin-action-buttons">
        <div class="span12">
            <div class="sonata-actions btn-group hidden-phone hidden-tablet visible-desktop pull-right">
                {% include 'SonataAdminBundle:Button:create_button.html.twig' %}
                {% include 'SonataAdminBundle:Button:list_button.html.twig' %}
            </div>
            <div class="btn-group visible-phone visible-tablet hidden-desktop  pull-right">
                <button class="btn btn-primary admin-actions admin-actions-group">Select an action to perform</button>
                <button data-toggle="dropdown" class="btn btn-primary dropdown-toggle admin-actions"><i class=" icon-chevron-down"></i></button>
                <ul class="dropdown-menu">
                    {% include 'SonataAdminBundle:Button:create_button_mobile.html.twig' %}
                    {% include 'SonataAdminBundle:Button:list_button_mobile.html.twig' %}
                </ul>
            </div>
        </div>
    </div>
{% endblock %}

{% block side_menu %}{{ knp_menu_render(admin.sidemenu(action), {'currentClass' : 'active'}, 'list') }}{% endblock %}

{% block content %}
    <div class="widget-box">
        <div class="widget-title">
                <span class="icon">
                    <i class="icon-th-list"></i>
                </span>
            <h5>{{ 'title_batch_confirmation'|trans({}, 'SonataAdminBundle') }}</h5>
        </div>
        <div class="widget-content nopadding sonata-ba-delete rz-form-widget-content">
            <div class="row-fluid">
                <div class='span12 rmz-confimation-message'>
                {% if data.all_elements %}
                    <i class="splashy-error"></i> {{ 'message_batch_all_confirmation'|trans({}, 'SonataAdminBundle') }}
                {% else %}
                    <i class="splashy-error"></i> {% transchoice data.idx|length with {'%count%': data.idx|length} from 'SonataAdminBundle' %}message_batch_confirmation{% endtranschoice %}
                {% endif %}
                </div>
            </div>
            <div class="form-actions">
                <form action="{{ admin.generateUrl('batch', admin.filterParameters) }}" method="POST" >
                    <input type="hidden" name="confirmation" value="ok" />
                    <input type="hidden" name="data" value="{{ data|json_encode }}" />

                    <div style="display: none">
                        {{ form_rest(form) }}
                    </div>

                    <input type="submit" class="btn btn-danger" value="{{ 'btn_execute_batch_action'|trans({}, 'SonataAdminBundle') }}" />

                    {% if admin.hasRoute('list') and admin.isGranted('LIST') %}
                        {{ 'delete_or'|trans({}, 'SonataAdminBundle') }}

                        <a class="btn btn-success" href="{{ admin.generateUrl('list') }}">{{ 'link_action_list'|trans({}, 'SonataAdminBundle') }}</a>
                    {% endif %}
                </form>
            </div>
        </div>
    </div>
{% endblock %}
